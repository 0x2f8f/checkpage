<?xml version="1.0" encoding="utf-8"?>
<database
        name="default"
        defaultIdMethod="native"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://xsd.propelorm.org/1.7/database.xsd"
        namespace="ItBlaster\MainBundle\Model">

    <table name="project" description="Проекты">
        <column name="id"           type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="title"        type="varchar" required="true" primaryString="true" />
        <column name="link"         type="varchar" />
        <column name="active"       type="boolean" />
        <column name="status"       type="boolean" />
        <column name="last_check"   type="timestamp" />
        <column name="user_id"      type="integer" />

        <behavior name="sluggable">
            <parameter name="primary_string" value="title" />
        </behavior>

        <foreign-key foreignTable="fos_user" onDelete="setnull" onUpdate="cascade">
            <reference local="user_id" foreign="id" />
        </foreign-key>
    </table>

    <table name="project_link" description="Ссылки">
        <column name="id"           type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="title"        type="varchar" required="true" primaryString="true" />
        <column name="link"         type="varchar" required="true" />
        <column name="active"       type="boolean" />
        <column name="project_id"   type="integer" />

        <foreign-key foreignTable="project" onDelete="setnull" onUpdate="cascade">
            <reference local="project_id" foreign="id" />
        </foreign-key>
    </table>

</database>